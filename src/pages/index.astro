---
import BaseLayout from "../layouts/BaseLayout.astro";
import Hero from "../components/Hero.astro";
import GoogleReviews from "../components/GoogleReviews.astro";
import ServiceShowcase from "../components/ServiceShowcase.astro";
import ServiceAreaMap from "../components/ServiceAreaMap.astro";
import Section from "../components/Section.astro";
import QuoteForm from "../components/QuoteForm.astro";
import site from "../content/site.json";
import googleReviews from "../content/google-reviews.json";

const { pages, service_area, global_faq, navigation } = site;
const quoteBackground = pages.quote?.background_image ?? "/images/quote-bg.jpg";
const whyChooseCards = [
  {
    title: "Quality",
    body: pages.home.why_choose.items?.[0],
    icon: "check"
  },
  {
    title: "Reliable",
    body: pages.home.why_choose.items?.[1],
    icon: "link"
  },
  {
    title: "Local",
    body: pages.home.why_choose.items?.[2],
    icon: "pin"
  }
];
---
<BaseLayout title={site.business.name} description={site.business.tagline}>
  <Hero
    eyebrow={pages.home.hero.eyebrow}
    headline={pages.home.hero.headline}
    subhead={pages.home.hero.subhead}
    primaryCta={pages.home.hero.primary_cta}
    secondaryCta={pages.home.hero.secondary_cta}
    secondaryHref={pages.home.hero.secondary_href}
    media={pages.home.hero.media}
    panel={pages.home.hero.panel}
  />

  <GoogleReviews
    title={pages.home.google_reviews.title}
    summary={googleReviews.summary}
    reviews={googleReviews.reviews}
  />

  <ServiceShowcase
    title={pages.home.service_showcase.title}
    items={pages.home.service_showcase.items}
  />

  <section class="py-12 sm:py-16 overflow-x-hidden">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid gap-8 lg:gap-0 lg:grid-cols-[1.15fr_0.85fr] items-stretch">
        <div class="lg:ml-[calc(50%-50vw)] lg:w-[calc(100%+50vw-50%)]">
          <ServiceAreaMap fullBleed />
        </div>
        <div class="min-w-0 lg:mr-[calc(50%-50vw)] bg-white flex">
          <div class="w-full min-w-0 flex flex-col justify-center px-6 py-10 sm:px-8 sm:py-12 lg:px-12 lg:py-14 lg:pr-[calc(50vw-50%+48px)]">
            <h2 class="text-2xl sm:text-3xl font-display text-ink">
              {pages.home.service_area.title}
            </h2>
            <div class="mt-4 w-16 h-[2px] bg-moss/70"></div>
            <p class="mt-4 text-sm text-ink/70">{pages.home.service_area.body}</p>
            <a
              href={pages.home.service_area.cta_href}
              class="mt-6 inline-flex self-start items-center justify-center rounded-full bg-ink text-fog px-6 py-2 text-sm font-semibold shadow-soft hover:bg-ink/90"
            >
              {pages.home.service_area.cta_label}
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="py-12 sm:py-16">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl sm:text-3xl font-display text-ink text-center">
        {pages.home.why_choose.title}
      </h2>
      {pages.home.why_choose.body && (
        <p class="mt-3 text-sm sm:text-base text-ink/70 text-center max-w-2xl mx-auto">
          {pages.home.why_choose.body}
        </p>
      )}
      <div class="mt-10 grid gap-10 md:grid-cols-3 text-center">
        {whyChooseCards.map((card) => (
          <div class="flex flex-col items-center">
            <div class="w-20 h-20 rounded-full bg-sage text-ember flex items-center justify-center shadow-soft">
              {card.icon === "check" && (
                <svg viewBox="0 0 640 512" class="w-9 h-9" fill="currentColor" aria-hidden="true">
                  <path d="M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z" />
                </svg>
              )}
              {card.icon === "link" && (
                <svg viewBox="0 0 640 512" class="w-9 h-9" fill="currentColor" aria-hidden="true">
                  <path d="M434.7 64h-85.9c-8 0-15.7 3-21.6 8.4l-98.3 90c-.1.1-.2.3-.3.4-16.6 15.6-16.3 40.5-2.1 56 12.7 13.9 39.4 17.6 56.1 2.7.1-.1.3-.1.4-.2l79.9-73.2c6.5-5.9 16.7-5.5 22.6 1 6 6.5 5.5 16.6-1 22.6l-26.1 23.9L504 313.8c2.9 2.4 5.5 5 7.9 7.7V128l-54.6-54.6c-5.9-6-14.1-9.4-22.6-9.4zM544 128.2v223.9c0 17.7 14.3 32 32 32h64V128.2h-96zm48 223.9c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zM0 384h64c17.7 0 32-14.3 32-32V128.2H0V384zm48-63.9c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16c0-8.9 7.2-16 16-16zm435.9 18.6L334.6 217.5l-30 27.5c-29.7 27.1-75.2 24.5-101.7-4.4-26.9-29.4-24.8-74.9 4.4-101.7L289.1 64h-83.8c-8.5 0-16.6 3.4-22.6 9.4L128 128v223.9h18.3l90.5 81.9c27.4 22.3 67.7 18.1 90-9.3l.2-.2 17.9 15.5c15.9 13 39.4 10.5 52.3-5.4l31.4-38.6 5.4 4.4c13.7 11.1 33.9 9.1 45-4.7l9.5-11.7c11.2-13.8 9.1-33.9-4.6-45.1z" />
                </svg>
              )}
              {card.icon === "pin" && (
                <svg viewBox="0 0 384 512" class="w-9 h-9" fill="currentColor" aria-hidden="true">
                  <path d="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z" />
                </svg>
              )}
            </div>
            <h3 class="mt-6 text-[34px] font-bold tracking-[0.18em] uppercase text-ink">
              {card.title}
            </h3>
            <p class="mt-3 text-sm text-ink/70 max-w-xs">{card.body}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section
    class="relative overflow-hidden py-16 sm:py-20"
    style={`background-image: url('${quoteBackground}'); background-size: 100% auto; background-repeat: no-repeat; background-position: center top;`}
  >
    <div class="absolute inset-0 bg-ink/55"></div>
    <div class="relative max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid gap-10 lg:grid-cols-[1.05fr_0.95fr] items-center">
        <div class="bg-fog/95 rounded-2xl shadow-lift p-6 sm:p-8">
          <h3 class="text-2xl font-display text-ink text-center">Get a Quote</h3>
          <div class="mt-6">
            <QuoteForm />
          </div>
        </div>
        <div class="text-fog">
          <h2 class="text-4xl sm:text-5xl font-display font-bold">
            Contact Us
          </h2>
          <p class="mt-4 text-base sm:text-lg text-fog/85 max-w-xl">
            Request a quote today for portable restroom rental or service!
          </p>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
