---
import { Image } from "astro:assets";
import logoImage from "../assets/logo.png";
import badgeImage from "../assets/locally-owned.webp";
import site from "../content/site.json";
const { navigation, business, labels } = site;
const logoSrc = business.logo?.src;
const isDefaultLogo = logoSrc === "/images/logo.png";
const badgeSrc = business.badge?.src;
const isDefaultBadge = badgeSrc === "/images/locally-owned.webp";
---
<header class="sticky top-0 z-40 text-fog">
  <div class="bg-ember text-sage text-sm sm:text-base font-bold font-sans">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex items-center justify-center">
      <span class="uppercase tracking-[0.2em]">{labels.superheader_call}</span>
      <a href={navigation.cta_secondary.href} class="ml-3 uppercase tracking-[0.2em] text-sage hover:text-sage/80">
        {business.phone_display}
      </a>
    </div>
  </div>
  <div class="bg-sage border-b border-ink/10">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex flex-wrap items-center justify-between gap-6 py-6">
      <a href="/" class="flex items-center gap-4">
        {business.logo?.src ? (
          isDefaultLogo ? (
            <Image src={logoImage} alt={business.logo.alt ?? business.name} class="h-24 sm:h-24 w-auto" loading="eager" />
          ) : (
            <img src={business.logo.src} alt={business.logo.alt ?? business.name} class="h-24 sm:h-24 w-auto" loading="eager" />
          )
        ) : (
          <span class="font-display text-xl text-fog">{business.name}</span>
        )}
      </a>
      <nav class="hidden md:flex items-center gap-8 text-base font-semibold">
        {navigation.primary.map((item) => (
          <a href={item.href} class="text-fog/80 hover:text-fog">{item.label}</a>
        ))}
      </nav>
      <div class="hidden md:flex items-center gap-4">
        {business.badge?.src && (
          isDefaultBadge ? (
            <Image src={badgeImage} alt={business.badge.alt ?? "Locally owned"} class="h-12 w-12" loading="lazy" />
          ) : (
            <img src={business.badge.src} alt={business.badge.alt ?? "Locally owned"} class="h-12 w-12" loading="lazy" />
          )
        )}
        <a href={navigation.cta_primary.href} class="px-5 py-2 rounded-full bg-ember text-ink text-sm font-semibold shadow-soft">
          {navigation.cta_primary.label}
        </a>
      </div>
    </div>
  </div>
  <div class="md:hidden border-t border-fog/20 bg-sage">
    <div class="grid grid-cols-2 gap-2 px-4 py-3">
      <a href={navigation.cta_primary.href} class="text-center px-3 py-2 rounded-lg bg-ember text-ink font-semibold shadow-soft">
        {navigation.cta_primary.label}
      </a>
    </div>
  </div>
  </div>
</header>
