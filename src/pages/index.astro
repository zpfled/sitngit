---
import BaseLayout from "../layouts/BaseLayout.astro";
import Hero from "../components/Hero.astro";
import GoogleReviews from "../components/GoogleReviews.astro";
import ServiceShowcase from "../components/ServiceShowcase.astro";
import ServiceAreaMap from "../components/ServiceAreaMap.astro";
import Section from "../components/Section.astro";
import QuoteForm from "../components/QuoteForm.astro";
import WhyChooseGrid from "../components/WhyChooseGrid.astro";
import site from "../content/site.json";
import googleReviews from "../content/google-reviews.json";

const { pages, service_area, global_faq, navigation } = site;
const quoteBackground = pages.quote?.background_image ?? "/images/quote-bg.jpg";

---
<BaseLayout title={site.business.name} description={site.business.tagline}>
  <Hero
    eyebrow={pages.home.hero.eyebrow}
    headline={pages.home.hero.headline}
    subhead={pages.home.hero.subhead}
    primaryCta={pages.home.hero.primary_cta}
    secondaryCta={pages.home.hero.secondary_cta}
    secondaryHref={pages.home.hero.secondary_href}
    media={pages.home.hero.media}
    panel={pages.home.hero.panel}
  />

  <GoogleReviews
    title={pages.home.google_reviews.title}
    summary={googleReviews.summary}
    reviews={googleReviews.reviews}
  />

  <ServiceShowcase
    title={pages.home.service_showcase.title}
    items={pages.home.service_showcase.items}
  />

  <section class="py-12 sm:py-16 overflow-x-hidden">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid gap-8 lg:gap-0 lg:grid-cols-[1.15fr_0.85fr] items-stretch">
        <div class="lg:ml-[calc(50%-50vw)] lg:w-[calc(100%+50vw-50%)]">
          <ServiceAreaMap fullBleed />
        </div>
        <div class="min-w-0 lg:mr-[calc(50%-50vw)] bg-white flex">
          <div class="w-full min-w-0 flex flex-col justify-center px-6 py-10 sm:px-8 sm:py-12 lg:px-12 lg:py-14 lg:pr-[calc(50vw-50%+48px)]">
            <h2 class="text-2xl sm:text-3xl font-display text-ink">
              {pages.home.service_area.title}
            </h2>
            <div class="mt-4 w-16 h-[2px] bg-moss/70"></div>
            <p class="mt-4 text-sm text-ink/70">{pages.home.service_area.body}</p>
            <a
              href={pages.home.service_area.cta_href}
              class="mt-6 inline-flex self-start items-center justify-center rounded-full bg-ink text-fog px-6 py-2 text-sm font-semibold shadow-soft hover:bg-ink/90"
            >
              {pages.home.service_area.cta_label}
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="py-12 sm:py-16">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl sm:text-3xl font-display text-ink text-center">
        {pages.home.why_choose.title}
      </h2>
      {pages.home.why_choose.body && (
        <p class="mt-3 text-sm sm:text-base text-ink/70 text-center max-w-2xl mx-auto">
          {pages.home.why_choose.body}
        </p>
      )}
      <WhyChooseGrid />
    </div>
  </section>

  <section
    class="relative overflow-hidden py-16 sm:py-20"
    style={`background-image: url('${quoteBackground}'); background-size: 100% auto; background-repeat: no-repeat; background-position: center top;`}
  >
    <div class="absolute inset-0 bg-ink/55"></div>
    <div class="relative max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid gap-10 lg:grid-cols-[1.05fr_0.95fr] items-center">
        <div class="bg-fog/95 rounded-2xl shadow-lift p-6 sm:p-8">
          <h3 class="text-2xl font-display text-ink text-center">Get a Quote</h3>
          <div class="mt-6">
            <QuoteForm />
          </div>
        </div>
        <div class="text-fog">
          <h2 class="text-4xl sm:text-5xl font-display font-bold text-fog">
            Contact Us
          </h2>
          <p class="mt-4 text-base sm:text-lg text-fog/85 max-w-xl">
            Request a quote today for portable restroom rental or service!
          </p>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
